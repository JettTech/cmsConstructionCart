<% include _layouts/header %>

<h1 class="page-title">My Cart</h1>
<br/>


<% if (typeof cart !== "undefined") %>
	<table class="alignMiddle">
		<tr>
			<th>Image</th>
			<th>Title</th>
			<th>Price</th>
			<th>Quantity</th>
			<th></th>
			<th>Subtotal</th>
		</tr>

		<% var total = 0 %>
		<% cart.forEach(function(product) { %>
		<% var subTotal = parseFloat(product.qty * product.price).toFixed(2) %>
		<% total += subTotal %>
		<tr>
			<td>
				<img width="100px" class="cartImages" src="<%= product.image %>" alt="Image of Product">
			</td>
			<td><%= product.title %></td>
			<td><%= product.price %></td>
			<td><%= product.qty %></td>
			<td></td>
			<td>
				<a href="/cart/update/<%= product.title %>/?action=add">| +</a>&nbsp;
				<a href="/cart/update/<%= product.title %>/?action=remove">| -</a>&nbsp;|
				<a href="/cart/update/<%= product.title %>/?action=clear">| Clear |</a>&nbsp;
			</td>
			<td>$<%= +subTitle %></td> <!-- add the "+" sign to ensure that the type is rednered as an Integer. -->
		</tr>>
		<% }); %>
		<tr>
			<td colspan="6" align="right"><strong>$<%= parseFloat(total).toFixed(2) %></strong></td>
		</tr>
		<tr>
			<td colspan="5" align="right">
				<a class="btn btn-danger clearCart" href="/cart/clear">Clear cart</a>
			</td>
			<td colspan="5" align="right">
				<a class="btn btn-primary buyNow" href="#">Buy now</a>
			</td>
		</tr>
	</table>
<% } else { %>
	<h3 class="text-center">Your cart is empty.</h3>
<% } %>

<% include _layouts/footer %>